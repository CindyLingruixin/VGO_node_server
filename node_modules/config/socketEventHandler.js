module.exports = function(io)
{
    io.on('connection', function(socket){

        console.log('-> a user connected through socket');

        socket.on('chat message', function(msg){
            console.log("-> chat message received");
            console.log(" ** session_id: " + socket.handshake.session.id);
            console.log(" ** user_id: " + socket.handshake.session.user_id);

            io.emit('chat message', msg);
        });

        socket.on('disconnect', function(){
            console.log('-> user disconnected from socket');
        });
    });
}